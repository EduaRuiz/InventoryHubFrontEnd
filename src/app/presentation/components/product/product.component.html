<div class="container mt-4">
  <h2>Formulario de Envío</h2>
  <button  *ngIf="selectedRole === 'admin' || selectedRole === 'SuperAdmin'" type="button" class="btn btn-primary" (click)="toggleModal('customer-sale')">Enviar a Customer</button>
  <button  type="button" class="btn btn-primary" (click)="toggleModal('seller-sale')">Enviar a Seller</button>
  <button  *ngIf="selectedRole === 'admin' || selectedRole === 'SuperAdmin'" type="button" class="btn btn-primary" (click)="toggleModal('purchase')">Agregar inventario</button>
  <button *ngIf="selectedRole === 'admin' || selectedRole === 'SuperAdmin'" type="button" class="btn btn-primary" (click)="toggleModal('register')">Registrar Producto</button>
  <div class="mb-3">
    <label for="branchId" class="form-label">Selecciona una Sucursal:</label>
    <select
      id="branchId"
      name="branchId"
      [(ngModel)]="selectedBranchId"
      class="form-control"
      (change)="onBranchChange()"
    >
      <option *ngFor="let branch of branchsList" [value]="branch.branchId">
        {{ branch.name }}
      </option>
    </select>
  </div>

  <div [class.d-none]="Modal" [class.d-block]="!Modal">
    <div class="container mt-4">
      <form *ngIf="endpoint !== 'register'" (ngSubmit)="onSubmit()" [formGroup]="productForm">
        <div class="mb-3">
          <label for="productId" class="form-label">Nombre Producto:</label>
          <select
            id="productId"
            name="productId"
            formControlName="productId"           
            class="form-control"
            required>
            <option *ngFor="let product of products" [value]="product.productId">
              {{ product.name }} stock: {{product.quantity}}
            </option>
          </select>
        </div>

        <div class="mb-3">
          <label for="quantity" class="form-label">Cantidad:</label>
          <input type="number" id="quantity" name="quantity" formControlName="quantity" class="form-control" required>
        </div>

        <div class="mb-3">
          <button type="submit" class="btn btn-primary">Enviar </button>
        </div>
      </form>

      <form *ngIf="endpoint === 'register'" (ngSubmit)="onSubmit()" [formGroup]="registerForm">
        <div class="mb-3">
          <label for="productName" class="form-label">Nombre del Producto:</label>
          <input type="text" id="productName" name="productName" formControlName="name"  class="form-control" required>
          <div *ngIf="registerForm.get('name')?.hasError('required')" class="text-danger">
            Nombre del producto es requerido.
          </div>
        </div>
      
        <div class="mb-3">
          <label for="productDescription" class="form-label">Descripción del Producto:</label>
          <input type="text" id="productDescription" name="productDescription" formControlName="description"  class="form-control" required>
          <div *ngIf="registerForm.get('description')?.hasError('required')" class="text-danger">
            Descripción del producto es requerida.
          </div>
        </div>
      
        <div class="mb-3">
          <label for="productPrice" class="form-label">Precio del Producto:</label>
          <input type="number" id="productPrice" name="productPrice" formControlName="price"  class="form-control" required>
          <div *ngIf="registerForm.get('price')?.hasError('required')" class="text-danger">
            Precio del producto es requerido.
          </div>
        </div>
          <label for="productCategory" class="form-label">Categoría del Producto:</label>
          <select id="productCategory" name="productCategory" formControlName="category"  class="form-control" required>
            <option value="hand tools">Hand Tools</option>
                <option value="power tools">Power Tools</option>
                <option value="locksmithing">Locksmithing</option>
                <option value="construction hardware">Construction Hardware</option>
                <option value="paint and accessories">Paint and Accessories</option>
                <option value="gardening and outdoors">Gardening and Outdoors</option>
                <option value="safety and protective equipment">Safety and Protective Equipment</option>
                <option value="plumbing supplies">Plumbing Supplies</option>
                <option value="electrical">Electrical</option>
                <option value="home fixtures">Home Fixtures</option>
              </select> <div *ngIf="registerForm.get('category')?.hasError('required')" class="text-danger">
                Categoría del producto es requerida.
              </div>
            
          
    
            <div class="mb-3">
              <button type="submit" class="btn btn-primary">Enviar (Registro de Producto)</button>
              <button type="button" class="btn btn-secondary" (click)="Modal = true">Cancelar</button>
            </div>
          </form>
        </div>
      </div>
    </div>